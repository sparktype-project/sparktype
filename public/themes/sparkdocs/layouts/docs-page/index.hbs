{{! layouts/docs-page/index.hbs }}

{{#if contentFile.frontmatter.banner_image}}
    <div class="mb-6">
        {{{image fieldname="banner_image" class="w-full h-72 object-cover rounded-lg" alt=contentFile.frontmatter.title}}}
    </div>
{{/if}}

{{! Check if TOC should be shown (hide only when explicitly set to false) }}
{{#if (eq contentFile.frontmatter.showToc false)}}
    {{! Single column layout without TOC }}
    <div class="max-w-2xl min-w-0 flex-auto px-4 py-16 lg:max-w-none lg:pr-0 lg:pl-8 xl:px-16">
        <article>
            {{#if contentFile.frontmatter.title}}
                <header class="mb-9 space-y-1">
                    <h1 class="font-display text-3xl tracking-tight text-slate-900 dark:text-white">
                        {{contentFile.frontmatter.title}}
                    </h1>
                    {{#if contentFile.frontmatter.description}}
                        <p class="text-xl text-slate-500 dark:text-slate-400">{{contentFile.frontmatter.description}}</p>
                    {{/if}}
                </header>
            {{/if}}

            {{#if contentFile.frontmatter.featured_image}}
                <div class="mb-6">
                    {{{image fieldname="featured_image" class="w-full rounded-lg" alt=contentFile.frontmatter.title}}}
                </div>
            {{/if}}

            <div class="prose">
                {{{content}}}
            </div>

            {{#if contentFile.frontmatter.layoutConfig}}
                <hr class="my-8"/>
                {{{render_collection contentFile.frontmatter.layoutConfig}}}
            {{/if}}
        </article>
    </div>
{{else}}
    {{! Two-column layout with TOC (default) }}
    <div class="max-w-2xl min-w-0 flex-auto px-4 py-16 lg:max-w-none lg:pr-0 lg:pl-8 xl:px-16">
        <article>
            {{#if contentFile.frontmatter.title}}
                <header class="mb-9 space-y-1">
                    <h1 class="font-display text-3xl tracking-tight text-slate-900 dark:text-white">
                        {{contentFile.frontmatter.title}}
                    </h1>
                    {{#if contentFile.frontmatter.description}}
                        <p class="text-xl text-slate-500 dark:text-slate-400">{{contentFile.frontmatter.description}}</p>
                    {{/if}}
                </header>
            {{/if}}

            {{#if contentFile.frontmatter.featured_image}}
                <div class="mb-6">
                    {{{image fieldname="featured_image" class="w-full rounded-lg" alt=contentFile.frontmatter.title}}}
                </div>
            {{/if}}

            <div class="prose">
                {{{content}}}
            </div>

            {{#if contentFile.frontmatter.layoutConfig}}
                <hr class="my-8"/>
                {{{render_collection contentFile.frontmatter.layoutConfig}}}
            {{/if}}
        </article>
    </div>

    {{! Table of Contents }}
    {{#if content}}
        {{#if (toc content minLevel=2 maxLevel=3)}}
            <div class="hidden xl:sticky xl:top-19 xl:-mr-6 xl:block xl:h-[calc(100vh-4.75rem)] xl:flex-none xl:overflow-y-auto xl:py-16 xl:pr-6">
                <nav aria-labelledby="on-this-page-title" class="w-56">
                    <h2 id="on-this-page-title"
                        class="font-display text-sm font-medium text-slate-900 dark:text-white">
                        On this page
                    </h2>
                    <div class="mt-4 space-y-3 text-sm toc-container">
                        {{{toc_html content minLevel=2 maxLevel=3}}}
                    </div>
                </nav>
            </div>
        {{/if}}
    {{/if}}
{{/if}}