{{! layouts/docs-page/index.hbs }}

{{#if contentFile.frontmatter.banner_image}}
    <div class="">
        {{{image fieldname="banner_image" class="w-full h-72 cover bg-center" alt=contentFile.frontmatter.title}}}
    </div>
{{/if}}

{{! Check if TOC should be shown (hide only when explicitly set to false) }}
{{#if (eq contentFile.frontmatter.showToc false)}}
    {{! Single column layout without TOC }}
    <article class="max-w-4xl px-4 py-8 lg:px-8">
        <h1>{{contentFile.frontmatter.title}}</h1>
        <p class="text-xl">{{contentFile.frontmatter.description}}</p>

        {{#if contentFile.frontmatter.featured_image}}
            <div class="mb-6">
                {{{image fieldname="featured_image" class="w-full" alt=contentFile.frontmatter.title}}}
            </div>
        {{/if}}

        {{{content}}}

        {{#if contentFile.frontmatter.layoutConfig}}
            <hr/>
            {{{render_collection contentFile.frontmatter.layoutConfig}}}
        {{/if}}
    </article>
{{else}}
    {{! Two-column layout with TOC (default) }}
    <div class="flex flex-row min-h-screen">
        <article class="py-8 px-4 md:px-6 flex-1">
            <h1>{{contentFile.frontmatter.title}}</h1>
            <p class="text-xl">{{contentFile.frontmatter.description}}</p>

            {{#if contentFile.frontmatter.featured_image}}
                <div class="mb-6">
                    {{{image fieldname="featured_image" class="w-full" alt=contentFile.frontmatter.title}}}
                </div>
            {{/if}}

            {{{content}}}

            {{#if contentFile.frontmatter.layoutConfig}}
                <hr/>
                {{{render_collection contentFile.frontmatter.layoutConfig}}}
            {{/if}}
        </article>

        {{! Table of Contents }}
        <div class="hidden md:block w-64 border-l border-border sticky top-50px max-h-screen-minus-header overflow-y-auto font-headings">
           {{#if content}}
            {{#if (toc content minLevel=2 maxLevel=4)}}
                <aside class="py-6 px-4">
                    <h2 class="text-xs font-semibold uppercase mb-3 mt-0 text-heading font-headings">On this page</h2>
                    {{{toc_html content minLevel=2 maxLevel=4}}}
                </aside>
            {{/if}}
            {{/if}}
        </div>
    </div>
{{/if}}